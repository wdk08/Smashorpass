<!DOCTYPE html>
<html lang="en">
<head>


  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Smash or Pass</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="default.css">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.png">
    <meta name="apple-mobile-web-app-title" content="Blue Flash">

  <style>
        #editCategories{
      position:absolute;
      top:20px;
      right:20px;
      padding:8px 12px;
      background:#0af;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:bold;
      transition:.2s;
    }
    #editCategories:hover{
      background:rgba(0, 170, 255, 0.724);
    }
#editform {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #222;
      padding: 20px;
      border: 2px solid #0af;
      border-radius: 12px;
      z-index: 1000;
}
#saveCategories, #cancelEdit, #resetCategories {
      padding: 8px 12px;
      margin-top: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
}
    .card.center{
      margin: 30px auto;
      display: block;
    }
    .smash{
      background:#1a1a1a;
      color:#3cff9a;
      border:2px solid #3cff9a;
      box-shadow:0 0 15px rgba(60,255,154,.4);
    }
    .pass{
      background:#1a1a1a;
      color:#ff5c5c;
      border:2px solid #ff5c5c;
      box-shadow:0 0 15px rgba(255,92,92,.4);
    }
    .buttons button{
      font-size:1.4rem;
      padding:14px 28px;
      margin:0 20px;
      border-radius:12px;
      cursor:pointer;
      font-weight:bold;
      transition:.2s;
    }
    .buttons button:hover{
      transform:scale(1.08);
    }
  </style>
    <link rel="stylesheet" href="mobile.css">
</head>

<body>


<div id="editform">
  <h2>Edit Categories</h2>
  <label>Smash:</label><br>
  <input type="text" id="editSmash" style="width:100%;"><br><br>
  <label>Pass:</label><br>
  <input type="text" id="editPass" style="width:100%;"><br><br>
  <button id="saveCategories">CONFIRM</button>
  <button id="resetCategories">RESET</button>
  <button id="cancelEdit">CANCEL</button>
</div>
<h1>Smash or Pass</h1>

<div class="navLinks"></div>
<br><br>

<div class="mode-toggle">
  <div class="select-wrap">
    <select class="dropdown" data-role="single"></select>
  </div>
</div>

<div class="card big-card center" id="smashCard">
  <img id="celeb-img" src="" alt="" draggable="false">
  <p id="celeb-name">Loading...</p>
</div>

<div class="buttons">
  <button class="smash" onclick="vote('smash')">Smash</button>
  <button class="pass" onclick="vote('pass')">Pass</button>
</div>

<div id="helpWrapper">
  <button id="helpBtn">?</button>
  <div id="helpTooltip">
    <strong>How to Play</strong><br><br>
    • Each round, you will see a person<br>
    • Click Smash or Pass
  </div>
</div>
<button id="editCategories">EDIT</button>

<script src="default.js"></script>

<script>
/* =========================
   GAME STATE
========================= */

const celebImg = document.getElementById("celeb-img");
const celebName = document.getElementById("celeb-name");
const smashCard = document.getElementById("smashCard");
const buttons = document.querySelector(".buttons");

let currentData = {};
let celebNames = [];
let index = 0;

/* =========================
   GAME START
========================= */

loadPeopleData(() => {
  startGame();
});

/* =========================
   START / RESET GAME
========================= */

function startGame(){
  const people = getPeople(gender);

  celebNames = shuffle(Object.keys(people));
  currentData = people;
  index = 0;
try{
  if (localStorage.getItem("smashCategory")) {
    document.querySelector('.smash').textContent = localStorage.getItem("smashCategory");
  }
  if (localStorage.getItem("passCategory")) {
    document.querySelector('.pass').textContent = localStorage.getItem("passCategory");
  }
} catch (e) {
  console.error("Error accessing localStorage:", e);
}

  buttons.style.display = "block";
  showCeleb();
}

/* =========================
   GAME LOOP
========================= */

function showCeleb(){
  if(index >= celebNames.length){
    smashCard.innerHTML = "<h2>You're done</h2>";
    buttons.style.display = "none";
    return;
  }

  const name = celebNames[index];
  const img = currentData[name];

  celebName.textContent = name;
  celebImg.src = img || "";
}

/* =========================
   USER ACTION
========================= */

function vote(choice){
  console.log(`${celebNames[index]}: ${choice}`);
  index++;
  showCeleb();
}

/* =========================
   UTIL
========================= */

function shuffle(arr){
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

document.getElementById("editCategories").onclick = () => {
  document.getElementById("editform").style.display = "block";
};

document.getElementById("saveCategories").onclick = () => {
  const smash = document.getElementById("editSmash").value.trim() || "Smash";
  const pass = document.getElementById("editPass").value.trim() || "Pass";
  localStorage.setItem("smashCategory", smash);
  localStorage.setItem("passCategory", pass);

  document.querySelector('.smash').textContent = `${smash}`;
  document.querySelector('.pass').textContent = `${pass}`;
  document.getElementById("editform").style.display = "none";
};

document.getElementById("resetCategories").onclick = () => {
  localStorage.removeItem("smashCategory");
  localStorage.removeItem("passCategory");

  document.querySelector('.smash').textContent = "Smash";
  document.querySelector('.pass').textContent = "Pass";
  document.getElementById("editform").style.display = "none";
};

document.getElementById("cancelEdit").onclick = () => {
  document.getElementById("editform").style.display = "none";
};

document.getElementById("helpBtn").onclick = () => {
  const tooltip = document.getElementById("helpTooltip");
  tooltip.style.display = tooltip.style.display === "block" ? "none" : "block";
};
</script>

</body>
</html>
