<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smash or Pass</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="default.css">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.png">

  <style>
    .card.center{
      margin: 30px auto;
      display: block;
    }
    .smash{
      background:#1a1a1a;
      color:#3cff9a;
      border:2px solid #3cff9a;
      box-shadow:0 0 15px rgba(60,255,154,.4);
    }
    .pass{
      background:#1a1a1a;
      color:#ff5c5c;
      border:2px solid #ff5c5c;
      box-shadow:0 0 15px rgba(255,92,92,.4);
    }
    .buttons button{
      font-size:1.4rem;
      padding:14px 28px;
      margin:0 20px;
      border-radius:12px;
      cursor:pointer;
      font-weight:bold;
      transition:.2s;
    }
    .buttons button:hover{
      transform:scale(1.08);
    }
  </style>
</head>

<body>

<div id="helpWrapper">
  <button id="helpBtn">?</button>
  <div id="helpTooltip">
    <strong>How to Play</strong><br><br>
    • Each round, you will see a person<br>
    • Click Smash or Pass
  </div>
</div>

<h1>Smash or Pass</h1>

<div class="navLinks"></div>
<br><br>

<div class="mode-toggle">
  <div class="select-wrap">
    <select class="dropdown" data-role="single"></select>
  </div>
</div>

<div class="card big-card center" id="smashCard">
  <img id="celeb-img" src="" alt="" draggable="false">
  <p id="celeb-name">Loading...</p>
</div>

<div class="buttons">
  <button class="smash" onclick="vote('smash')">Smash</button>
  <button class="pass" onclick="vote('pass')">Pass</button>
</div>

<script src="default.js"></script>

<script>
/* =========================
   GAME STATE
========================= */

const celebImg = document.getElementById("celeb-img");
const celebName = document.getElementById("celeb-name");
const smashCard = document.getElementById("smashCard");
const buttons = document.querySelector(".buttons");

let currentData = {};
let celebNames = [];
let index = 0;

/* =========================
   GAME START
========================= */

loadPeopleData(() => {
  startGame();
});

/* =========================
   START / RESET GAME
========================= */

function startGame(){
  const people = getPeople(gender);

  celebNames = shuffle(Object.keys(people));
  currentData = people;
  index = 0;

  buttons.style.display = "block";
  showCeleb();
}

/* =========================
   GAME LOOP
========================= */

function showCeleb(){
  if(index >= celebNames.length){
    smashCard.innerHTML = "<h2>You're done</h2>";
    buttons.style.display = "none";
    return;
  }

  const name = celebNames[index];
  const img = currentData[name];

  celebName.textContent = name;
  celebImg.src = img || "";
}

/* =========================
   USER ACTION
========================= */

function vote(choice){
  console.log(`${celebNames[index]}: ${choice}`);
  index++;
  showCeleb();
}

/* =========================
   UTIL
========================= */

function shuffle(arr){
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}
</script>

</body>
</html>
