<!DOCTYPE html>
<html>
<head>
    <title>Blind Ranking</title>
    <style>
        body { font-family: Arial; text-align: center; }
        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px auto;
            width: 70%;
        }
        .slot {
            border: 2px solid #444;
            padding: 10px;
            height: 100px;
            background: #eee;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            cursor: pointer;
        }
        .filled {
            background: #c1ffc1;
            cursor: default;
        }
        img { max-height: 180px; margin: 10px; border-radius: 10px; }
        .hidden { display: none; }
        button {
            padding: 12px 25px;
            margin: 10px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>Blind Ranking</h1>

<!-- Gender selection screen -->
<div id="genderSelect">
    <h2>Choose a Category</h2>
    <button onclick="startGame('Male')">Men</button>
    <button onclick="startGame('Female')">Women</button>
</div>

<!-- Game screen -->
<div id="game" class="hidden">
    <h3 id="currentName">Loading...</h3>
    <img id="currentImg" src="" alt="" />

    <div class="grid" id="slots">
        <div class="slot" data-rank="1">1</div>
        <div class="slot" data-rank="2">2</div>
        <div class="slot" data-rank="3">3</div>
        <div class="slot" data-rank="4">4</div>
        <div class="slot" data-rank="5">5</div>
        <div class="slot" data-rank="6">6</div>
        <div class="slot" data-rank="7">7</div>
        <div class="slot" data-rank="8">8</div>
        <div class="slot" data-rank="9">9</div>
        <div class="slot" data-rank="10">10</div>
    </div>
</div>

<script>
let items = [];
let index = 0;
let gender = null;

// Called when user clicks "Men" or "Women"
function startGame(selectedGender) {
    gender = selectedGender;

    document.getElementById("genderSelect").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");

    loadItems();
}

// Load items from JSON based on chosen gender
async function loadItems() {
    const response = await fetch("people.json");
    const data = await response.json();

    let list = [];

    // Convert chosen gender section into array
    for (const [name, img] of Object.entries(data[gender])) {
        list.push({ name, img });
    }

    // Shuffle and pick 10
    items = list.sort(() => Math.random() - 0.5).slice(0, 10);

    showNext();
}

// Show next item to rank
function showNext() {
    if (index >= items.length) {
        document.getElementById("currentName").textContent = "Ranking Complete!";
        document.getElementById("currentImg").style.display = "none";
        return;
    }

    const item = items[index];
    document.getElementById("currentName").textContent = item.name;
    document.getElementById("currentImg").src = item.img;
    document.getElementById("currentImg").style.display = "block";
}

// Slot click handler
document.querySelectorAll(".slot").forEach(slot => {
    slot.addEventListener("click", () => {
        if (slot.classList.contains("filled")) return;
        if (index >= items.length) return;

        const item = items[index];

        slot.classList.add("filled");
        slot.innerHTML = `
            <strong>${slot.dataset.rank}. ${item.name}</strong>
            <img src="${item.img}" style="max-height:60px; border-radius:6px;" />
        `;

        index++;
        showNext();
    });
});
</script>

</body>
</html>
