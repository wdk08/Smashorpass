<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Blind Ranking</title>
  <link rel="stylesheet" href="default.css">
  <style>
        .card.center{
      margin: 30px auto;
      display: block;
    }
    .grid{
      display:grid;
      grid-template-columns:repeat(5, 1fr);
      gap:16px;
      margin:40px auto;
      width:90%;
      max-width:1000px;
    }
    .slot{
      background:#1a1a1a;
      border:2px solid #444;
      border-radius:12px;
      padding:15px;
      height:120px;
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      cursor:pointer;
      transition:.2s;
      font-size:16px;
    }
    .slot.filled{
      background:#0f2f1f;
      border-color:#3cff9a;
      cursor:default;
      transform:none;
    }
    .slot img{
      max-height:55px;
      margin-top:6px;
      border-radius:6px;
      object-fit:contain;
      background:#000;
    }
    .hidden{
      display:none;
    }
  </style>
</head>

<body>
<div id="helpWrapper">
  <button id="helpBtn">?</button>
  <div id="helpTooltip">
    <strong>How to Play</strong><br><br>
    • Each round, you will be shown a person to rank from 1 to 10.<br>
    • Click on the slot corresponding to the rank you want to give them.<br>
    • Once ranked, they cannot be changed.<br>
    • Once all 10 people have been ranked, your final ranking will be displayed.
  </div>
</div>
<h1>Blind Ranking</h1>


  <a href="index.html">Smash or Pass</a>
  <a href="kmk.html">Kiss Marry Kill</a>
  <a href="goc.html">Girl or Car</a>
  <a href="blind.html">Blind Ranking</a>
  <a href="wyw.html">King of the Hill</a>
  <a href="chaos.html">Infinity War</a>
  <a href="fb.html">Football Lineup</a>
  <a href="draft.html">Roster</a>

  <br><br>

<div class="mode-toggle">
  <button id="femaleBtn" class="active">♀ Female</button>
  <button id="maleBtn">♂ Male</button>
</div>

<div id="game">
  <div class="card big-card center" id="cardToRank">
  <img id="celeb-img" src="" alt="" draggable="false">
  <p id="celeb-name">Loading...</p>
</div>

  <div class="grid">
    <div class="slot hoverable" data-rank="1">1</div>
    <div class="slot hoverable" data-rank="2">2</div>
    <div class="slot hoverable" data-rank="3">3</div>
    <div class="slot hoverable" data-rank="4">4</div>
    <div class="slot hoverable" data-rank="5">5</div>
    <div class="slot hoverable" data-rank="6">6</div>
    <div class="slot hoverable" data-rank="7">7</div>
    <div class="slot hoverable" data-rank="8">8</div>
    <div class="slot hoverable" data-rank="9">9</div>
    <div class="slot hoverable" data-rank="10">10</div>
  </div>
</div>

<script src="default.js"></script>
<script>
let items = [];
let index = 0;
const card = document.getElementById("cardToRank");
const img  = document.getElementById("celeb-img");
const nameEl = document.getElementById("celeb-name");

async function loadItems(){
  const res = await fetch("people.json");
  const data = await res.json();

  items = Object.entries(data[gender])
    .map(([name, img]) => ({ name, img }))
    .sort(() => Math.random() - 0.5)
    .slice(0, 10);

  showNext();
}

function showNext(){
  if(index >= items.length){
    nameEl.textContent = "Ranking Complete!";
    img.style.display = "none";
    card.classList.remove("hoverable");
    return;
  }

  const item = items[index];

  nameEl.textContent = item.name;

  if(item.img){
    img.src = item.img;
    img.style.display = "block";
  } else {
    img.style.display = "none";
  }
}

document.querySelectorAll(".slot").forEach(slot=>{
  slot.addEventListener("click", ()=>{
    if(slot.classList.contains("filled")) return;
    if(index >= items.length) return;

    const item = items[index];

    slot.classList.add("filled");
    slot.innerHTML = `
      <strong>${slot.dataset.rank}. ${item.name}</strong>
      ${item.img ? `<img src="${item.img}">` : ""}
    `;

    index++;
    showNext();
  });
});

function resetSlots(){
  document.querySelectorAll(".slot").forEach(slot=>{
    slot.classList.remove("filled");
    slot.textContent = slot.dataset.rank;
  });
}
window.onGenderChange = () => {
  index = 0;
  resetSlots();
  loadItems();
};

loadItems();

</script>

</body>
</html>
