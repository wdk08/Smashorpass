<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Draft Pick</title>

<link rel="stylesheet" href="default.css">

<style>
/* ================= LAYOUT ================= */
.board {
  display: flex;
  justify-content: center;
  gap: 12px;
  padding: 15px;
  border-top: 1px solid #222;
}

.cards {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin: 30px 0;
}

/* ================= SLOTS ================= */
.slot {
  width: 210px;
  height: 330px;
  border-radius: 14px;
  background: #1c1c1c;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: rgba(28, 28, 28, 0.35);
  transition: 0.2s;
}

.slot.filled {
  opacity: 1;
}

.slot img {
  width: 100%;
  height: 80%;
  object-fit: cover;
}

.slot .slot-name {
  font-size: 0.75rem;
  padding: 6px;
}

/* ================= END ================= */
.end {
  display: none;
  padding: 30px;
  text-align: center;
}
</style>
</head>

<body>
<div id="helpWrapper">
  <button id="helpBtn">?</button>
  <div id="helpTooltip">
    <strong>How to Play</strong><br><br>
    • Each round, you will be shown two people to choose from<br>
    • Click who you want to keep<br>
    • The other person is gone<br>
    • There's 5 rounds to create your roster
  </div>
</div>
<h1>Draft Pick</h1>

<a href="index.html">Smash or Pass</a>
<a href="kmk.html">Kiss Marry Kill</a>
<a href="goc.html">Girl or Car</a>
<a href="blind.html">Blind Ranking</a>
<a href="wyw.html">King of the Hill</a>
<a href="chaos.html">Infinity War</a>
<a href="fb.html">Football Lineup</a>
<a href="draft.html">Roster</a>

<br><br>

<div class="mode-toggle">
  <button id="femaleBtn" onclick="switchGender('Female')">♀ Female</button>
  <button id="maleBtn" onclick="switchGender('Male')">♂ Male</button>
</div>

<h2 id="roundText">Round 1 of 5</h2>

<!-- TWO CHOICE CARDS -->
<div class="cards" id="cards"></div>

<!-- ROSTER BOARD -->
<div class="board" id="board"></div>


<script src="default.js"></script>
<script>
/* ================= CONFIG ================= */
const TOTAL_ROUNDS = 5;

/* ================= STATE ================= */
let pool = [];
let round = 1;
let picks = [];

/* ================= DOM ================= */
const cardsEl = document.getElementById("cards");
const boardEl = document.getElementById("board");
const roundText = document.getElementById("roundText");
const finalBoard = document.getElementById("finalBoard");

/* ================= START ================= */
function startGame(){
  pool = Object.entries(getPeopleByGender())
    .map(([name, img]) => ({ name, img }))
    .sort(() => Math.random() - 0.5);

  if(pool.length < TOTAL_ROUNDS * 2){
    alert("Not enough people for this mode.");
    return;
  }

  round = 1;
  picks = [];
  boardEl.innerHTML = "";
  cardsEl.innerHTML = "";

  initBoard();
  renderRound();
}

/* ================= BOARD ================= */
function initBoard(){
  for(let i = 0; i < TOTAL_ROUNDS; i++){
    const slot = document.createElement("div");
    slot.className = "slot";
    slot.textContent = i + 1;
    boardEl.appendChild(slot);
  }
}

/* ================= ROUND ================= */
function renderRound(){
  roundText.textContent = `Round ${round} of ${TOTAL_ROUNDS}`;
  cardsEl.innerHTML = "";

  const choices = pool.splice(0, 2);

  choices.forEach(person => {
    const card = document.createElement("div");
    card.className = "card hoverable";
  card.innerHTML = `
      ${person.img ? `<img src="${person.img}" draggable="false">` : ""}
      <p>${person.name}</p>
    `;
    card.onclick = () => pick(person);
    cardsEl.appendChild(card);
  });
}

/* ================= PICK ================= */
function pick(person){
  picks.push(person);

  const slot = boardEl.children[picks.length - 1];
  slot.classList.add("filled");
  slot.innerHTML = `
    <img src="${person.img}" alt="${person.name}">
    <div class="slot-name">${person.name}</div>
  `;

  if(round === TOTAL_ROUNDS){
    endGame();
  } else {
    round++;
    renderRound();
  }
}

/* ================= END ================= */
function endGame(){
  cardsEl.style.display = "none";
  roundText.style.display = "none";
  finalBoard.innerHTML = boardEl.innerHTML;
}

/* ================= INIT ================= */
loadPeopleData(startGame);
updateGenderButtons();
</script>

</body>
</html>
